---
interface Props {
  activePage?: string;
}

const { activePage } = Astro.props;
---

<header>
  <div class="container header-content">
    <a href="/" class="logo">
      <img src="/branding/lockup-dark.svg" alt="yepanywhere">
    </a>
    <nav>
      {activePage === 'home' ? (
        <>
          <a href="#screenshots" class="mobile-hide">Screenshots</a>
          <a href="#features" class="mobile-hide">Features</a>
          <a href="#install">Install</a>
          <a href="#faq" class="mobile-hide">FAQ</a>
          <a href="/news">News</a>
          <a href="https://github.com/kzahel/yepanywhere">GitHub</a>
          <a href="/remote" style="color: var(--accent); font-weight: 500;">Log In</a>
        </>
      ) : activePage === 'privacy' ? (
        <>
          <a href="/">Home</a>
          <a href="/news">News</a>
          <a href="https://github.com/kzahel/yepanywhere">GitHub</a>
        </>
      ) : (
        <>
          <a href="/#screenshots">Screenshots</a>
          <a href="/#features">Features</a>
          <a href="/#install">Install</a>
          <a href="/news" class={activePage === 'news' ? 'active' : ''}>News</a>
          <a href="https://github.com/kzahel/yepanywhere">GitHub</a>
        </>
      )}
      <button class="theme-toggle" aria-label="Toggle theme" type="button">
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </nav>
  </div>
</header>

<style>
  .theme-toggle {
    background: none;
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px;
    cursor: pointer;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s, border-color 0.2s;
  }
  .theme-toggle:hover {
    color: var(--text-primary);
    border-color: var(--text-secondary);
  }
  /* In dark mode (default): show sun icon to switch to light */
  .icon-moon { display: none; }
  .icon-sun { display: block; }
  /* In light mode: show moon icon to switch to dark */
  html[data-theme="light"] .icon-sun { display: none; }
  html[data-theme="light"] .icon-moon { display: block; }
</style>

<script is:inline>
(function() {
  var btn = document.querySelector('.theme-toggle');
  if (!btn) return;
  btn.addEventListener('click', function() {
    var current = document.documentElement.getAttribute('data-theme');
    var next = current === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    // Swap logo
    var logo = document.querySelector('.logo img');
    if (logo) {
      logo.src = next === 'light' ? '/branding/lockup-light.svg' : '/branding/lockup-dark.svg';
    }
  });
  // Set initial logo based on current theme
  var theme = document.documentElement.getAttribute('data-theme');
  if (theme === 'light') {
    var logo = document.querySelector('.logo img');
    if (logo) logo.src = '/branding/lockup-light.svg';
  }
})();
</script>
